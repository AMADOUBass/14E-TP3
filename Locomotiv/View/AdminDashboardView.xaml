<UserControl x:Class="Locomotiv.View.AdminDashboardView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:gmap="clr-namespace:GMap.NET.WindowsPresentation;assembly=GMap.NET.WindowsPresentation"
    mc:Ignorable="d"
    Loaded="AdminDashboardView_Loaded"
    d:DesignHeight="600" d:DesignWidth="1000">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </UserControl.Resources>
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Partie haute -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">

            <!-- Détails de la station sélectionnée -->
            <GroupBox Header="Station sélectionnée" Margin="0,10,0,10">
                <!--Visibility="{Binding EstStationSelectionnee, Converter={StaticResource BoolToVisibilityConverter}}"-->
                <StackPanel>
                    
            

                    <!-- Détails du point d’intérêt -->
                    <StackPanel Visibility="{Binding EstPointInteretSelectionne, Converter={StaticResource BoolToVisibilityConverter}}">
                        <TextBlock Text="{Binding PointInteretSelectionne.Nom}" />
                        <TextBlock Text="{Binding PointInteretSelectionne.Localisation}" />
                        <!-- etc. -->
                    </StackPanel>
                    <!-- Détails de la station -->
                    <TextBlock Text="{Binding StationSelectionnee.Nom}" FontWeight="Bold" FontSize="16"/>
                    <TextBlock Text="Capacité maximale:"/>
                    <TextBlock Text="{Binding StationSelectionnee.CapaciteMaxTrains}"/>
                    <TextBlock Text="Localisation:"/>
                    <TextBlock Text="{Binding StationSelectionnee.Localisation}"/>
                    <TextBlock Text="Latitude:"/>
                    <TextBlock Text="{Binding StationSelectionnee.Latitude}"/>
                    <TextBlock Text="Longitude:"/>
                    <TextBlock Text="{Binding StationSelectionnee.Longitude}"/>
                    
                    <Button Content="Afficher les conflits" Click="AfficherConflits_Click" />
                    <Button Content="Rafraîchir les conflits" Click="RafraichirConflits_Click" Margin="10"/> 
                    
                    <GroupBox Header="Conflits détectés" Margin="10" Padding="5">

                        <ListBox ItemsSource="{Binding ConflitsTextuels}"
                             Background="LightYellow"
                             BorderBrush="DarkRed"
                             BorderThickness="2"
                             FontWeight="Bold"
                             Foreground="DarkRed"
                             Padding="5" 
                        />
                    </GroupBox>
                    <GroupBox Header="Conflits liés à la station sélectionnée" Margin="10">
                        <ListBox ItemsSource="{Binding ConflitsDeLaStationSelectionnee}"
                             Background="LightYellow"
                             BorderBrush="DarkOrange"
                             BorderThickness="2"
                             FontWeight="Bold"
                             Foreground="DarkRed"
                             Padding="5" 
                        /> 
                    </GroupBox>
                </StackPanel>
            </GroupBox>

            <!-- Liste des Train liés -->
            <TextBlock Text="Train liés à cette station :" FontWeight="Bold" Margin="0,10,0,5"/>
            <ItemsControl ItemsSource="{Binding TrainsDeLaStationSelectionnee}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Nom}" FontSize="14" Margin="0,0,0,5"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Boutons -->
            <StackPanel Orientation="Horizontal" Margin="0,10,0,10">
                <Button Content="Ajouter un train" Command="{Binding AjouterTrainCommand}" Margin="5"/>
                <Button Content="Supprimer un train" Command="{Binding SupprimerTrainCommand}" Margin="5"/>
                <Button Content="Planifier un itinéraire" Command="{Binding PlanifierItineraireCommand}" Margin="5"/>

            </StackPanel>


            <!-- Erreurs -->
            <TextBlock Text="{Binding ErrorMessages}" Foreground="Red" HorizontalAlignment="Center" Margin="10"/>

            <!-- Carte -->
            <gmap:GMapControl x:Name="MapControl" Grid.Row="1" Width="1200" Height="700"/>


        </StackPanel>



    </Grid>
</UserControl>