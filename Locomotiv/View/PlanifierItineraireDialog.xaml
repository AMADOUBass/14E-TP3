<Window
  x:Class="Locomotiv.View.PlanifierItineraireDialog"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
  Title="Planifier un itinéraire"
  Height="480"
  Width="600"
  WindowStartupLocation="CenterScreen"
>
  <StackPanel Margin="20">
    <!-- Sélection du train -->
    <TextBlock Text="Sélectionner un train :" />
    <ComboBox x:Name="cmbTrain" SelectedValuePath="Id" Margin="0,5">
      <ComboBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Nom}" FontWeight="Bold" />
            <TextBlock Text=" - " />
            <TextBlock Text="{Binding Etat}" Foreground="Gray" />
          </StackPanel>
        </DataTemplate>
      </ComboBox.ItemTemplate>
    </ComboBox>

    <!-- Construction de l’itinéraire -->
    <TextBlock Text="Construire l'itinéraire (stations / points d’intérêt) :" Margin="0,10,0,5" />

    <Grid Margin="0,5,0,0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <!-- Points disponibles -->
      <StackPanel Grid.Column="0">
        <TextBlock Text="Points disponibles" FontWeight="Bold" Margin="0,0,0,5" />
        <ListBox x:Name="lstPointsDisponibles" DisplayMemberPath="Nom" Height="180" />
      </StackPanel>

      <!-- Boutons + Dates/Heures -->
      <StackPanel Grid.Column="1" Margin="10,0" VerticalAlignment="Top">
        <Button Content="➕ Ajouter ⇒" Click="BtnAjouterEtape_Click" Margin="0,0,0,5" />
        <Button Content="⛔ Retirer" Click="BtnRetirerEtape_Click" />

        <!-- Date et heure de départ -->
        <TextBlock Text="Date et heure de départ :" Margin="0,15,0,0" />
        <xctk:DateTimePicker
          x:Name="dtDepart"
          Format="Custom"
          FormatString="dd/MM/yyyy HH:mm"
          Margin="0,5"
          Width="180"
        />

        <!-- Date et heure d'arrivée -->
        <TextBlock Text="Date et heure d'arrivée :" Margin="0,15,0,0" />
        <xctk:DateTimePicker
          x:Name="dtArrivee"
          Format="Custom"
          FormatString="dd/MM/yyyy HH:mm"
          Margin="0,5"
          Width="180"
        />
      </StackPanel>

      <!-- Itinéraire -->
      <StackPanel Grid.Column="2">
        <TextBlock Text="Itinéraire (ordre des étapes)" FontWeight="Bold" Margin="0,0,0,5" />
        <ListBox x:Name="lstItineraire" DisplayMemberPath="Nom" Height="150" />

        <StackPanel Orientation="Horizontal" Margin="0,5,0,0" HorizontalAlignment="Right">
          <Button Content="⬆ Monter" Click="BtnMonterEtape_Click" Margin="0,0,5,0" />
          <Button Content="⬇ Descendre" Click="BtnDescendreEtape_Click" />
        </StackPanel>
      </StackPanel>
    </Grid>

    <!-- Confirmation règles -->
    <CheckBox
      x:Name="chkRespecteRegles"
      Content="Je confirme que les règles de sécurité (block control, distance, etc.) sont respectées."
      Margin="0,15,0,0"
    />

    <!-- Boutons -->
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
      <Button Content="Planifier" Width="90" Margin="0,0,10,0" Click="BtnValider_Click" />
      <Button Content="Annuler" Width="90" Click="BtnAnnuler_Click" />
    </StackPanel>
  </StackPanel>
</Window>
